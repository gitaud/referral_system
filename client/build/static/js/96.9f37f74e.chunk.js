"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[96],{91903:function(t,n,e){e.d(n,{_X:function(){return i},_v:function(){return u},f2:function(){return o},go:function(){return s}});var r=e(74165),a=e(15861),c=e(43745),i=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n,e){var a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,c.W)(n).post("/transactions/",e);case 3:return a=t.sent,t.abrupt("return",a.data);case 7:throw t.prev=7,t.t0=t.catch(0),new Error("Could not create transaction",{cause:t.t0});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(n,e){return t.apply(this,arguments)}}(),s=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n,e){var a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,c.W)(n).get("/transactions/".concat(e));case 3:return a=t.sent,t.abrupt("return",a.data);case 7:throw t.prev=7,t.t0=t.catch(0),new Error("Could not fetch transaction",{cause:t.t0});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(n,e){return t.apply(this,arguments)}}(),u=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n,e){var a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,c.W)(n).get("/transactions?".concat(e));case 3:return a=t.sent,t.abrupt("return",a.data);case 7:throw t.prev=7,t.t0=t.catch(0),new Error("Could not fetch transactions",{cause:t.t0});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(n,e){return t.apply(this,arguments)}}(),o=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){var e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,c.W)(n).get("/transactions/income");case 3:return e=t.sent,t.abrupt("return",e.data);case 7:throw t.prev=7,t.t0=t.catch(0),new Error("Could not fetch transaction income info",{cause:t.t0});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(n){return t.apply(this,arguments)}}()},14711:function(t,n,e){e.d(n,{Z:function(){return v}});var r=e(29439),a=e(47313),c=e(23208),i=e(27426),s=e(8065),u=e(46417),o=function(t){var n=t.label,e=t.value,r=t.handleChange;return(0,u.jsx)(c._,{dateAdapter:i.Q,children:(0,u.jsx)(s.M,{label:n,value:e,onChange:function(t){return r(t)},disableFuture:!0})})},l=e(71195),d="DatePicker_container__CfjlM",f="DatePicker_dateField__X2Bu6",h="DatePicker_submitButton__eUkDU",v=function(){var t=(0,l.Ac)().dispatch,n=(0,a.useState)(null),e=(0,r.Z)(n,2),c=e[0],i=e[1],s=(0,a.useState)(null),v=(0,r.Z)(s,2),p=v[0],_=v[1];return(0,u.jsxs)("div",{className:d,children:[(0,u.jsx)("div",{className:f,children:(0,u.jsx)(o,{label:"Start Date",value:c,handleChange:function(t){return i(t)}})}),(0,u.jsx)("div",{className:f,children:(0,u.jsx)(o,{label:"End Date",value:p,handleChange:function(t){return _(t)}})}),(0,u.jsx)("button",{className:h,onClick:function(){t((0,l.rm)({date_gte:c.toDate().toDateString(),date_lte:p.toDate().toDateString()}))},children:"Set Date Filter"})]})}},64729:function(t,n,e){var r=e(47313);n.Z=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=(0,r.useRef)(document.title);(0,r.useLayoutEffect)((function(){document.title=t}),[t]),(0,r.useLayoutEffect)((function(){n&&(document.title=e.current)}),[n])}},71195:function(t,n,e){e.d(n,{Ac:function(){return p},ok:function(){return v},rm:function(){return f}});var r=e(1413),a=e(29439),c=e(47313),i=e(46417),s=(0,c.createContext)(null),u=new Date,o={date_lte:u.toDateString(),date_gte:new Date(u.setDate(u.getDate()-7)).toDateString()},l="INITIALIZE",d="SET_DATES",f=function(t){return{type:d,data:t}},h=function(t,n){switch(n.type){case l:return o;case d:return{date_lte:n.data.date_lte,date_gte:n.data.date_gte};default:return t}},v=function(t){var n=(0,c.useReducer)(h,o),e=(0,a.Z)(n,2),u=e[0],l=e[1];return(0,i.jsx)(s.Provider,(0,r.Z)({value:{dates:u,dispatch:l}},t))},p=function(){return(0,c.useContext)(s)}},9096:function(t,n,e){e.a(t,(async function(t,r){try{e.r(n),e.d(n,{default:function(){return j}});var a=e(74165),c=e(15861),i=e(29439),s=e(47313),u=e(2135),o=e(44401),l=e(67114),d=e.n(l),f=e(40649),h=e(14711),v=e(71195),p=e(91903),_=e(64729),m=e(61002),x=e(46417),w=t([f]);f=(w.then?(await w)():w)[0];var g=function(){(0,_.Z)("Transaction History");var t=(0,f.Eu)().user,n=(0,v.Ac)().dates,e=(0,s.useState)([]),r=(0,i.Z)(e,2),l=r[0],w=r[1];(0,s.useLayoutEffect)((function(){var e=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var r,c,i,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="date_gte=".concat(n.date_gte,"&date_lte=").concat(n.date_lte),e.next=4,(0,p._v)(t.authToken,r);case 4:c=e.sent,w(c),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.cause),d().fire({icon:"error",title:"Oops",text:(null===e.t0||void 0===e.t0||null===(i=e.t0.cause)||void 0===i||null===(s=i.response)||void 0===s?void 0:s.data)||"Could not fetch transactions"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();n.date_gte&&n.date_lte&&e()}),[n,t]);var g=[{field:"createdAt",headerName:"Date",flex:.4,renderCell:function(t){return(0,x.jsx)(x.Fragment,{children:new Date(t.row.createdAt).toString().slice(0,25)})}},{field:"amount",headerName:"Amount",flex:.2,renderCell:function(t){return(0,x.jsxs)(x.Fragment,{children:["Ksh ",t.row.amount]})}},{field:"commission",headerName:"Commission",flex:.2,renderCell:function(t){return(0,x.jsxs)(x.Fragment,{children:["Ksh ",t.row.commission||0]})}},{field:"action",headerName:"Action",flex:.2,renderCell:function(t){return(0,x.jsx)(u.rU,{to:"/transaction/"+t.row._id,children:(0,x.jsx)("button",{className:m.Z.transactionListEdit,children:"View"})})}}];return(0,x.jsxs)("div",{className:m.Z.transactionList,children:[(0,x.jsx)("span",{className:m.Z.title,children:"Transaction History "}),(0,x.jsx)(h.Z,{}),0===l.length&&(0,x.jsx)("span",{className:m.Z.hint,children:"Hint: Set the date range first "}),(0,x.jsx)(o._,{rows:l,disableSelectionOnClick:!0,columns:g,autoPageSize:!0,pagination:!0,getRowId:function(t){return t._id}})]})};function j(){return(0,x.jsx)(v.ok,{children:(0,x.jsx)(g,{})})}r()}catch(Z){r(Z)}}))},61002:function(t,n){n.Z={transactionList:"TransactionList_transactionList__0jRuO",title:"TransactionList_title__KJDKt",hint:"TransactionList_hint__3OnHz",transactionListItem:"TransactionList_transactionListItem__Xk-t4",transactionListLink:"TransactionList_transactionListLink__H-dQO",transactionListEdit:"TransactionList_transactionListEdit__FM+E0"}}}]);