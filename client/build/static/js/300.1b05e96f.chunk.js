"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[300],{24921:function(e,t,r){r.d(t,{JT:function(){return u},Kn:function(){return c},N:function(){return i},Uf:function(){return m},YP:function(){return d},ZX:function(){return l},cH:function(){return o},xH:function(){return p}});var n=r(74165),a=r(15861),s=r(43745),c=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(t).post("/menu/categories",r);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Could not create category",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(t).post("/menu/items",r);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Could not create menu item",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(t).get("/menu/categories/".concat(r));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Could not get category",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),o=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=7;break}return e.next=4,(0,s.W)(t).get("/menu/categories?".concat(r));case 4:a=e.sent,e.next=10;break;case 7:return e.next=9,(0,s.W)(t).get("/menu/categories");case 9:a=e.sent;case 10:return e.abrupt("return",a.data);case 13:throw e.prev=13,e.t0=e.catch(0),new Error("Could not fetch categories",{cause:e.t0});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r,a){var c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(t).patch("/menu/categories/".concat(r),a);case 3:return c=e.sent,e.abrupt("return",c.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Could not update menu category",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r,n){return e.apply(this,arguments)}}(),m=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r,a){var c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(t).patch("/menu/items/".concat(r),a);case 3:return c=e.sent,e.abrupt("return",c.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Could not create menu item",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r,n){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(t).delete("/menu/categories/".concat(r));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Could not delete menu category",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(t).delete("/menu/items/".concat(r));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Could not delete item",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()},91903:function(e,t,r){r.d(t,{_X:function(){return c},_v:function(){return u},f2:function(){return o},go:function(){return i}});var n=r(74165),a=r(15861),s=r(43745),c=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(t).post("/transactions/",r);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Could not create transaction",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(t).get("/transactions/".concat(r));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Could not fetch transaction",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(t).get("/transactions?".concat(r));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Could not fetch transactions",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),o=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(t).get("/transactions/income");case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Could not fetch transaction income info",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},57372:function(e,t,r){r.d(t,{AW:function(){return u},Nq:function(){return o},X_:function(){return d},qz:function(){return l},r4:function(){return c},tv:function(){return i},y1:function(){return m}});var n=r(74165),a=r(15861),s=r(43745),c=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(t).post("/users",r);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Failed to create user",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(t).get("/users/".concat(r));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Failed to get user",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(t).get("/users?".concat(r));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Failed to get all users",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),o=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r,a){var c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(t).patch("/users/".concat(r),a);case 3:return c=e.sent,e.abrupt("return",c.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Failed to update user",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r,n){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(t).get("/users/search?".concat(r));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Failed to search user",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),m=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r,a){var c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(t).patch("/users/referral/add/".concat(r),a);case 3:return c=e.sent,e.abrupt("return",c.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Failed to add referral",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r,n){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(t).get("/users/stats");case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Cannot get user stats",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},22589:function(e,t,r){r.a(e,(async function(e,n){try{r(47313);var a=r(40649),s=r(57372),c=r(22045),i=r(46417),u=e([a]);a=(u.then?(await u)():u)[0];t.Z=function(){var e=(0,a.Eu)().user;return(0,i.jsx)(c.Z,{defaultValues:{query:"",param:"email"},onSubmit:function(t){return(0,s.qz)(e.authToken,t)}})},n()}catch(o){n(o)}}))},22045:function(e,t,r){r.d(t,{Z:function(){return v}});var n=r(74165),a=r(15861),s=(r(47313),r(78081)),c=r(62563),i=r(21933),u=r(67114),o=r.n(u),l=r(34868),m=r(1413),d={referralForm:"SearchUser_referralForm__r-nPV",title:"SearchUser_title__mabeO",formInput:"SearchUser_formInput__fG5Qw",inputLabel:"SearchUser_inputLabel__SXChL",error:"SearchUser_error__uH80+",submitButton:"SearchUser_submitButton__w+ciH"},p=r(46417),f=function(e){var t,r,n=e.form,a=e.onSubmit,s=n.formState,c=n.register,i=n.handleSubmit,u=s.errors,o=s.isSubmitting;return(0,p.jsxs)("div",{className:d.container,children:[(0,p.jsx)("span",{className:d.title,children:"Search User"}),(0,p.jsxs)("form",{className:d.referralForm,onSubmit:i(a),children:[(0,p.jsx)("input",(0,m.Z)((0,m.Z)({className:d.formInput,name:"query"},c("query")),{},{placeholder:"Search"})),u&&(0,p.jsxs)("p",{className:d.error,children:[null===u||void 0===u||null===(t=u.query)||void 0===t?void 0:t.message," "]}),(0,p.jsx)("label",{htmlFor:"param",className:d.inputLabel,children:"Search by"}),(0,p.jsxs)("select",(0,m.Z)((0,m.Z)({className:d.formInput,id:"param"},c("param")),{},{name:"param",defaultValue:"email",children:[(0,p.jsx)("option",{value:"name",children:"Name"}),(0,p.jsx)("option",{value:"email",children:"Email"}),(0,p.jsx)("option",{value:"phone",children:"Phone Number"})]})),u&&(0,p.jsxs)("p",{className:d.error,children:[null===u||void 0===u||null===(r=u.param)||void 0===r?void 0:r.message," "]}),(0,p.jsx)("button",{className:d.submitButton,type:"submit",disabled:o,children:"Search"})]})]})},h=i.Ry().shape({query:i.Z_().required(),param:i.Z_().required()}),v=function(e){var t=e.defaultValues,r=e.onSubmit,i=(0,l.SE)().dispatch,u=(0,s.cI)({mode:"onSubmit",defaultValues:t,resolver:(0,c.X)(h)}),m=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var a,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i((0,l.j2)()),a=t.param+"="+t.query,o().fire({title:"Searching",timer:2e3,didOpen:function(){return o().showLoading()}}),e.next=6,r(a);case 6:s=e.sent,i((0,l.Vp)(s)),setTimeout((function(){o().fire({icon:"success",title:"Success",text:"User found",showConfirmButton:!0})}),1e3),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),i((0,l.Rn)(e.t0)),o().fire({icon:"error",title:"Oops",text:"Could not find user!"});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return(0,p.jsx)(f,{form:u,onSubmit:m})}},64729:function(e,t,r){var n=r(47313);t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,n.useRef)(document.title);(0,n.useLayoutEffect)((function(){document.title=e}),[e]),(0,n.useLayoutEffect)((function(){t&&(document.title=r.current)}),[t])}},34868:function(e,t,r){r.d(t,{Rn:function(){return p},SE:function(){return x},Vp:function(){return d},fS:function(){return v},j2:function(){return m}});var n=r(1413),a=r(29439),s=r(47313),c=r(46417),i=(0,s.createContext)(null),u="INITIALIZE",o="SUCCESS",l="FAILURE",m=function(){return{type:u}},d=function(e){return{type:o,data:e}},p=function(e){return{type:l,error:e}},f={user:null,error:null},h=function(e,t){switch(t.type){case u:return f;case o:return{user:t.data,error:null};case l:return{user:null,error:t.error};default:return e}},v=function(e){var t=(0,s.useReducer)(h,f),r=(0,a.Z)(t,2),u=r[0],o=r[1];return(0,c.jsx)(i.Provider,(0,n.Z)({value:{searchedUser:u,dispatch:o}},e))},x=function(){return(0,s.useContext)(i)}},49985:function(e,t,r){r.d(t,{Z:function(){return s}});r(47313);var n={cartWrapper:"pdf_cartWrapper__ybYyf",cart:"pdf_cart__c042r",topItems:"pdf_topItems__p2vXp",innerCart:"pdf_innerCart__w3ElW",titleContainer:"pdf_titleContainer__W5Fhu",showTitle:"pdf_showTitle__9TOJd",smallTopTitle:"pdf_smallTopTitle__ZGYHV",smallTitle:"pdf_smallTitle__S5+5L",line:"pdf_line__FGNiT",itemInfo:"pdf_itemInfo__srwkC",cartItemInfo:"pdf_cartItemInfo__u2qRT",itemName:"pdf_itemName__71FdZ",itemPrice:"pdf_itemPrice__cRRyO",customerInfo:"pdf_customerInfo__qKAv0",footer:"pdf_footer__8gVhS"},a=r(46417);function s(e){return(0,a.jsxs)("div",{className:n.cartWrapper,children:[(0,a.jsxs)("div",{className:n.topItems,children:[(0,a.jsx)("p",{className:n.topItem,children:new Date(e.createdAt).toString()}),(0,a.jsxs)("p",{className:n.topItem,children:["ID: ",e._id]})]}),(0,a.jsxs)("div",{className:n.titleContainer,children:[(0,a.jsx)("p",{className:n.showTitle,children:"KIJANA MSAFI"}),(0,a.jsx)("p",{className:n.smallTopTitle,children:"P.O BOX 12454 - 00400 Nrb"}),(0,a.jsx)("p",{className:n.smallTopTitle,children:"KRA PIN A0001230345T"}),(0,a.jsx)("p",{className:n.smallTopTitle,children:"Tel: 0722697202"})]}),(0,a.jsxs)("p",{children:["Served by: ",e.cashier]}),(0,a.jsx)("hr",{className:n.line}),(0,a.jsxs)("div",{className:n.cart,children:[(0,a.jsxs)("div",{className:n.itemInfo,children:[(0,a.jsx)("p",{className:n.itemName,children:"Item"}),(0,a.jsx)("p",{className:n.itemPrice,children:"Qty"}),(0,a.jsx)("p",{className:n.itemPrice,children:"Price"}),(0,a.jsx)("p",{className:n.itemPrice,children:"Total"})]}),(0,a.jsx)("hr",{className:n.line}),(0,a.jsx)("div",{className:n.innerCart,children:function(){var t=[],r=function(r){t.push((0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:n.smallTitle,children:e.items[r].name}),function(){var t=[];for(var s in e.items[r].items)t.push((0,a.jsxs)("div",{className:n.cartItemInfo,children:[(0,a.jsx)("p",{className:n.itemName,children:e.items[r].items[s].name}),(0,a.jsx)("p",{className:n.itemPrice,children:e.items[r].items[s].quantity}),(0,a.jsxs)("p",{className:n.itemPrice,children:["Ksh ",e.items[r].items[s].price]}),(0,a.jsxs)("p",{className:n.itemPrice,children:["Ksh ",e.items[r].items[s].total]})]},s));return t}()]},e.items[r].name))};for(var s in e.items)r(s);return t}()}),(0,a.jsx)("hr",{className:n.line}),(0,a.jsxs)("div",{className:n.itemInfo,children:[(0,a.jsx)("p",{className:n.itemName,children:"Order Total:"}),(0,a.jsx)("p",{className:n.itemPrice}),(0,a.jsx)("p",{className:n.itemPrice}),(0,a.jsxs)("p",{className:n.itemPrice,children:["Ksh ",e.amount]})]}),e.customer_id&&(0,a.jsxs)("div",{className:n.userInfo,children:[(0,a.jsx)("p",{className:n.smallTitle,children:"Customer Info"}),(0,a.jsxs)("div",{className:n.itemInfo,children:[(0,a.jsx)("p",{className:n.itemPrice,children:"Name: "}),(0,a.jsx)("p",{className:n.itemName,children:e.customer_id.name})]}),(0,a.jsxs)("div",{className:n.itemInfo,children:[(0,a.jsx)("p",{className:n.itemPrice,children:"Loyalty points: "}),(0,a.jsxs)("p",{className:n.itemName,children:[e.customer_id.commissionDue," points"]})]})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:n.footer,children:[(0,a.jsx)("p",{children:"Thanks & You're Always Welcome"}),(0,a.jsx)("p",{children:"Developed by LEAN SIGMA ANALYTICS LTD"}),(0,a.jsx)("p",{children:"Phone +254  708 440 459"})]})})]})]})}},55300:function(e,t,r){r.a(e,(async function(e,n){try{r.r(t),r.d(t,{default:function(){return k}});var a=r(74165),s=r(15861),c=r(29439),i=r(47313),u=r(84389),o=r(40651),l=r.n(o),m=r(58467),d=r(67114),p=r.n(d),f=r(16031),h=r(12216),v=r(68443),x=r(22589),_=r(40649),Z=r(34868),N=r(24921),j=r(91903),w=r(64729),y=r(67862),g=r(49985),T=r(32375),I=r(46417),b=e([x,_]);[x,_]=b.then?(await b)():b;var C=function(){(0,w.Z)("Create New Transaction");var e=(0,m.s0)(),t=(0,_.Eu)().user,r=(0,Z.SE)(),n=r.searchedUser,o=r.dispatch,d=(0,i.useState)([]),b=(0,c.Z)(d,2),C=b[0],S=b[1],k=(0,i.useState)(!1),E=(0,c.Z)(k,2),P=E[0],q=E[1],W=(0,i.useState)(!1),M=(0,c.Z)(W,2),A=M[0],U=M[1],B=(0,i.useReducer)(y.C$,y.Wn),L=(0,c.Z)(B,2),R=L[0],F=L[1],K=function(e){e.cashier=t.name;var r=u.renderToString((0,g.Z)(e));console.log("About to print"),l()().from(r).toPdf().get("pdf").then((function(e){e.autoPrint(),console.log("printing"),window.open(e.output("bloburl"),"_blank")}))},O=function(){var r=(0,s.Z)((0,a.Z)().mark((function r(){var s,c;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,0!==R.total){r.next=3;break}throw new Error("Add items to cart!",{cause:{response:{data:"Empty Cart"}}});case 3:return(s={}).items=(0,f.cloneDeep)(R.categories),n.user?(s.customer_id=n.user._id,s.customer_level_id=n.user.level._id):(s.customer_id=null,s.customer_level_id=null),s.redeemed=A,s.recorded_by=t.id,s.amount=R.trueTotal,s.redeemedTotal=R.redeemedTotal,p().fire({title:"Saving",timer:2e3,didOpen:function(){return p().showLoading()}}),r.next=13,(0,j._X)(t.authToken,s);case 13:c=r.sent,setTimeout((function(){p().fire({icon:"success",title:"Transaction Added",showConfirmButton:!0,timer:2e3})}),1500),e("/transaction/".concat(c._id)),K(c),r.next=23;break;case 19:r.prev=19,r.t0=r.catch(0),console.log(r.t0),p().fire({icon:"error",title:"Oops",text:"Cannot create order"});case 23:case"end":return r.stop()}}),r,null,[[0,19]])})));return function(){return r.apply(this,arguments)}}();return(0,i.useLayoutEffect)((function(){var e=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,N.cH)(t.authToken,null);case 3:r=e.sent,S(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),p().fire({icon:"error",title:"Oops",text:"Could not fetch menu items!",timer:2e3});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),(0,I.jsxs)("div",{className:T.Z.wrapper,children:[(0,I.jsxs)("div",{className:T.Z.titleContainer,children:[(0,I.jsx)("h1",{className:T.Z.title,children:"Create New Transaction "}),(0,I.jsx)("div",{})]}),(0,I.jsxs)("div",{className:T.Z.container,children:[(0,I.jsx)("div",{className:T.Z.menuItems,children:C&&C.map((function(e){return(0,I.jsxs)("div",{children:[(0,I.jsx)("p",{className:T.Z.showTitle,children:e.name}),(0,I.jsx)("div",{children:e.items.map((function(t){return(0,I.jsxs)("div",{className:T.Z.itemInfo,children:[(0,I.jsx)("p",{className:T.Z.itemName,children:t.name}),(0,I.jsxs)("p",{className:T.Z.itemPrice,children:["Ksh ",t.price]}),(0,I.jsx)("button",{className:T.Z.addButton,onClick:function(){return F((0,y.Xq)({categoryName:e.name,categoryId:e._id,item:t}))},children:"Add"})]},t._id)}))})]},e._id)}))}),(0,I.jsxs)("div",{className:T.Z.cartWrapper,children:[(0,I.jsx)("p",{className:T.Z.showTitle,children:"Cart"}),(0,I.jsx)("hr",{className:T.Z.line}),(0,I.jsxs)("div",{className:T.Z.cart,children:[(0,I.jsxs)("div",{className:T.Z.itemInfo,children:[(0,I.jsx)("p",{className:T.Z.itemPrice,children:"Item"}),(0,I.jsx)("p",{className:T.Z.itemPrice,children:"Qty"}),(0,I.jsx)("p",{className:T.Z.itemPrice,children:"Price"}),(0,I.jsx)("p",{className:T.Z.itemPrice,children:"Amount"}),(0,I.jsx)("p",{className:T.Z.itemPrice})]}),(0,I.jsx)("hr",{className:T.Z.line}),(0,I.jsx)("div",{className:T.Z.innerCart,children:function(){var e=[],t=function(t){e.push((0,I.jsxs)("div",{children:[(0,I.jsx)("p",{className:T.Z.smallTitle,children:R.categories[t].name}),function(){var e=[],r=function(r){e.push((0,I.jsxs)("div",{className:T.Z.cartItemInfo,children:[(0,I.jsx)("p",{className:T.Z.itemName,children:R.categories[t].items[r].name}),(0,I.jsx)("p",{className:T.Z.itemPrice,children:R.categories[t].items[r].quantity}),(0,I.jsxs)("p",{className:T.Z.itemPrice,style:{marginRight:"5px"},children:["Ksh ",R.categories[t].items[r].price]}),(0,I.jsxs)("p",{className:T.Z.itemPrice,children:["Ksh ",R.categories[t].items[r].total]}),(0,I.jsxs)("div",{className:T.Z.qtyIcons,children:[(0,I.jsx)(h.Z,{className:T.Z.qtyIcon,onClick:function(){return F((0,y.Qd)({categoryName:R.categories[t].name,categoryId:t,item:R.categories[t].items[r]}))}}),(0,I.jsx)(v.Z,{className:T.Z.qtyIcon,onClick:function(){return F((0,y.a3)({categoryName:R.categories[t].name,categoryId:t,item:R.categories[t].items[r]}))}})]})]},r))};for(var n in R.categories[t].items)r(n);return e}()]},R.categories[t].name))};for(var r in R.categories)t(r);return e}()}),(0,I.jsx)("hr",{className:T.Z.line}),(0,I.jsxs)("div",{className:T.Z.itemInfo,children:[(0,I.jsx)("p",{className:T.Z.itemName,children:"Order Total:"}),(0,I.jsx)("p",{className:T.Z.itemPrice}),(0,I.jsxs)("p",{className:T.Z.itemPrice,children:["Ksh ",R.redeemedTotal]})]}),(0,I.jsxs)("div",{className:T.Z.setSearch,children:[(0,I.jsx)("input",{className:T.Z.checkBox,value:P,checked:P,type:"checkbox",id:"searchUser",onChange:function(){P&&n.user&&(U(!1),F((0,y.dK)({redeem:!1,points:n.user.commissionDue}))),q(!P)}}),(0,I.jsx)("label",{htmlFor:"searchUser",className:T.Z.itemName,children:"Add user?"})]}),P?n.user?(0,I.jsxs)("div",{children:[(0,I.jsxs)("div",{className:T.Z.itemInfo,children:[(0,I.jsxs)("p",{className:T.Z.itemName,children:["Name: ",n.user.name]}),(0,I.jsxs)("p",{className:T.Z.itemName,children:["Loyalty Points: ",n.user.commissionDue," "]})]}),R.trueTotal?(0,I.jsxs)("div",{className:T.Z.setSearch,children:[(0,I.jsx)("input",{className:T.Z.checkBox,value:A,checked:A,type:"checkbox",id:"redeemPoints",onChange:function(){U(!A),F((0,y.dK)({redeem:!A,points:n.user.commissionDue}))}}),(0,I.jsx)("label",{htmlFor:"redeemPoints",className:T.Z.itemName,children:"Redeem Loyalty Points? "})]}):(0,I.jsx)(I.Fragment,{}),(0,I.jsx)("div",{className:T.Z.displayUserButton,children:(0,I.jsx)("button",{className:T.Z.changeUserButton,onClick:function(){q(!0),U(!1),F((0,y.dK)({redeem:!1,points:n.user.commissionDue})),o((0,Z.j2)())},children:"Change User"})})]}):(0,I.jsx)(x.Z,{}):(0,I.jsx)(I.Fragment,{}),(0,I.jsx)("button",{className:T.Z.addButton,onClick:O,children:"Create Order"})]})]})]})]})};function k(){return(0,I.jsx)(Z.fS,{children:(0,I.jsx)(C,{})})}n()}catch(S){n(S)}}))},67862:function(e,t,r){r.d(t,{C$:function(){return h},Qd:function(){return m},Wn:function(){return f},Xq:function(){return l},a3:function(){return d},dK:function(){return p}});var n=r(1413),a=r(16031),s="ADD TO CART",c="INCREASE QUANTITY",i="DECREASE QUANTITY",u="REDEEM POINTS TRUE",o="REDEEM POINTS FALSE",l=function(e){return{type:s,data:e}},m=function(e){return{type:c,data:e}},d=function(e){return{type:i,data:e}},p=function(e){return!0===e.redeem?{type:u,data:e}:{type:o,data:e}},f={categories:{},trueTotal:0,redeemedTotal:0},h=function(e,t){var r=(0,a.cloneDeep)(e),l=t.data.item,m=t.data.categoryName,d=t.data.categoryId;switch(t.type){case s:if(!r.categories.hasOwnProperty(d)){var p={name:m,items:{}};r.categories[d]=(0,n.Z)({},p)}return r.categories[d].items.hasOwnProperty(l._id)||(r.categories[d].items[l._id]={_id:l._id,name:l.name,price:l.price,quantity:0,total:0}),r.categories[d].items[l._id].quantity+=1,r.categories[d].items[l._id].total+=l.price,r.trueTotal+=l.price,r.redeemedTotal+=l.price,r;case c:return r.categories[d].items[l._id].quantity+=1,r.categories[d].items[l._id].total+=l.price,r.trueTotal+=l.price,r.redeemedTotal+=l.price,r;case i:if(1===r.categories[d].items[l._id].quantity){var f;for(var h in delete r.categories[d].items[l._id],r.trueTotal-=l.price,r.redeemedTotal-=l.price,r.categories[d].items)r.categories[d].items.hasOwnProperty(h)&&(f=!0);return f||delete r.categories[d],r}return r.categories[d].items[l._id].total-=l.price,r.categories[d].items[l._id].quantity-=1,r.trueTotal-=l.price,r.redeemedTotal-=l.price,r;case u:return t.data.points>=r.trueTotal?r.redeemedTotal=0:r.redeemedTotal-=t.data.points,r;case o:return r.redeemedTotal=r.trueTotal,r;default:return e}}},32375:function(e,t){t.Z={wrapper:"Menu_wrapper__15I+T",titleContainer:"Menu_titleContainer__GZQw0",title:"Menu_title__EM8iT",buttons:"Menu_buttons__q8SmS",addButton:"Menu_addButton__KLvWe",displayUserButton:"Menu_displayUserButton__RKpVL",changeUserButton:"Menu_changeUserButton__qVLIf",container:"Menu_container__mb4B5",cartWrapper:"Menu_cartWrapper__wHzg2",cart:"Menu_cart__vAS4O",innerCart:"Menu_innerCart__84BJC",menuItems:"Menu_menuItems__EATCL",showTitle:"Menu_showTitle__n-EYi",smallTitle:"Menu_smallTitle__KRXfC",line:"Menu_line__hZ+3X",itemInfo:"Menu_itemInfo__KrFqo",cartItemInfo:"Menu_cartItemInfo__njzl8",itemName:"Menu_itemName__0jcxR",itemPrice:"Menu_itemPrice__uJgrb",link:"Menu_link__BGRSN",active:"Menu_active__xvh1Y",checkBox:"Menu_checkBox__oyYgP",setSearch:"Menu_setSearch__XCAyg",qtyIcons:"Menu_qtyIcons__KjYee",qtyIcon:"Menu_qtyIcon__Qczyq",show:"Menu_show__oicmM"}}}]);