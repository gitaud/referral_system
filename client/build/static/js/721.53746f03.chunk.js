"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[721],{57372:function(e,r,t){t.d(r,{AW:function(){return o},Nq:function(){return i},X_:function(){return p},qz:function(){return l},r4:function(){return u},tv:function(){return c},y1:function(){return d}});var n=t(74165),a=t(15861),s=t(43745),u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r,t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(r).post("/users",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Failed to create user",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r,t){return e.apply(this,arguments)}}(),c=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r,t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(r).get("/users/".concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Failed to get user",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r,t){return e.apply(this,arguments)}}(),o=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r,t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(r).get("/users?".concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Failed to get all users",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r,t){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r,t,a){var u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(r).patch("/users/".concat(t),a);case 3:return u=e.sent,e.abrupt("return",u.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Failed to update user",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r,t,n){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r,t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(r).get("/users/search?".concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Failed to search user",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r,t){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r,t,a){var u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(r).patch("/users/referral/add/".concat(t),a);case 3:return u=e.sent,e.abrupt("return",u.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Failed to add referral",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r,t,n){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.W)(r).get("/users/stats");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Cannot get user stats",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r){return e.apply(this,arguments)}}()},64729:function(e,r,t){var n=t(47313);r.Z=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=(0,n.useRef)(document.title);(0,n.useLayoutEffect)((function(){document.title=e}),[e]),(0,n.useLayoutEffect)((function(){r&&(document.title=t.current)}),[r])}},61721:function(e,r,t){t.a(e,(async function(e,n){try{t.r(r);var a=t(74165),s=t(15861),u=(t(47313),t(64729)),c=t(40649),o=t(57372),i=t(27347),l=t(46417),d=e([c]);c=(d.then?(await d)():d)[0];r.default=function(){(0,u.Z)("Create New User");var e=(0,c.Eu)().user,r=function(){var r=(0,s.Z)((0,a.Z)().mark((function r(t){return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.r4)(e.authToken,t));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return(0,l.jsx)(i.Z,{defaultValues:{name:"",email:"",phone:"",password:"",isAdmin:!1},user:e,onSubmit:r})},n()}catch(p){n(p)}}))},27347:function(e,r,t){t.d(r,{Z:function(){return w}});var n=t(74165),a=t(15861),s=t(29439),u=t(47313),c=t(58467),o=t(78081),i=t(62563),l=t(21933),d=t(43745),p=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.W)(r).get("/levels");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Failed to fetch levels",{cause:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r){return e.apply(this,arguments)}}(),m=t(1413),f=t(6624),v=t(46417),h=function(e){var r,t,n,a,s,u=e.form,c=e.onSubmit,o=u.formState,i=u.register,l=u.handleSubmit,d=o.errors,p=o.isSubmitting;return(0,v.jsx)("div",{className:f.Z.user,children:(0,v.jsx)("div",{className:f.Z.userContainer,children:(0,v.jsxs)("div",{className:f.Z.userUpdate,children:[(0,v.jsx)("span",{className:f.Z.userUpdateTitle,children:"Create New User"}),(0,v.jsxs)("form",{className:f.Z.userUpdateForm,onSubmit:l(c),children:[(0,v.jsxs)("div",{className:f.Z.userUpdateLeft,children:[(0,v.jsxs)("div",{className:f.Z.userUpdateItem,children:[(0,v.jsx)("label",{htmlFor:"name",children:"Name"}),(0,v.jsx)("input",(0,m.Z)({type:"text",id:"name",placeholder:"Name",className:f.Z.userUpdateInput},i("name"))),d&&(0,v.jsx)("div",{className:f.Z.error,children:null===d||void 0===d||null===(r=d.name)||void 0===r?void 0:r.message})]}),(0,v.jsxs)("div",{className:f.Z.userUpdateItem,children:[(0,v.jsx)("label",{htmlFor:"email",children:"Email"}),(0,v.jsx)("input",(0,m.Z)((0,m.Z)({id:"email",type:"email"},i("email")),{},{placeholder:"example@email.com",className:f.Z.userUpdateInput})),d&&(0,v.jsx)("div",{className:f.Z.error,children:null===d||void 0===d||null===(t=d.email)||void 0===t?void 0:t.message})]}),(0,v.jsxs)("div",{className:f.Z.userUpdateItem,children:[(0,v.jsx)("label",{htmlFor:"phone",children:"Phone"}),(0,v.jsx)("input",(0,m.Z)((0,m.Z)({id:"phone",type:"text"},i("phone")),{},{placeholder:"0711 223 344",className:f.Z.userUpdateInput})),d&&(0,v.jsx)("div",{className:f.Z.error,children:null===d||void 0===d||null===(n=d.phone)||void 0===n?void 0:n.message})]}),(0,v.jsxs)("div",{className:f.Z.userUpdateItem,children:[(0,v.jsx)("label",{htmlFor:"password",children:"Phone"}),(0,v.jsx)("input",(0,m.Z)((0,m.Z)({id:"password",type:"text"},i("password")),{},{placeholder:"Strong password",className:f.Z.userUpdateInput})),d&&(0,v.jsx)("div",{className:f.Z.error,children:null===d||void 0===d||null===(a=d.password)||void 0===a?void 0:a.message})]}),(0,v.jsxs)("div",{className:f.Z.userUpdateItem,children:[(0,v.jsx)("label",{htmlFor:"admin",children:"Is Admin "}),(0,v.jsxs)("select",(0,m.Z)((0,m.Z)({name:"admin",id:"admin",defaultValue:!1,className:f.Z.userUpdateInput},i("isAdmin")),{},{children:[(0,v.jsx)("option",{value:!0,children:"Yes"}),(0,v.jsx)("option",{value:!1,children:"No"})]})),d&&(0,v.jsx)("div",{className:f.Z.error,children:null===d||void 0===d||null===(s=d.isAdmin)||void 0===s?void 0:s.message})]}),(0,v.jsx)("div",{className:f.Z.userUpdateItem,children:(0,v.jsx)("button",{className:f.Z.userUpdateButton,disabled:p,type:"submit",children:"Create"})})]}),(0,v.jsx)("div",{className:f.Z.userUpdateRight})]})]})})})},Z=t(67114),x=t.n(Z),U=l.Ry().shape({name:l.Z_().required(),email:l.Z_().email().required(),phone:l.Z_().required(),isAdmin:l.O7().required(),level:l.Z_(),password:l.Z_().required()}),w=function(e){var r=e.defaultValues,t=e.user,l=e.onSubmit,d=(0,u.useState)(),m=(0,s.Z)(d,2),f=m[0],Z=m[1],w=(0,c.s0)(),_=(0,o.cI)({mode:"onSubmit",defaultValues:r,resolver:(0,i.X)(U)});(0,u.useLayoutEffect)((function(){var e=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t.authToken);case 2:r=e.sent,a=r.filter((function(e){return 0===e.rank}))[0],Z(a._id);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}));var j=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t,a,s,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:r.name,email:r.email,phone:r.phone,password:r.password,level:f},e.prev=1,x().fire({title:"Saving",timer:2e3,didOpen:function(){return x().showLoading()}}),e.next=5,l(t);case 5:a=e.sent,setTimeout((function(){x().fire({icon:"success",title:"User info saved",showConfirmButton:!0,timer:2e3})}),1500),w("/user/".concat(a._id)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),x().fire({icon:"error",title:"Oops",text:"".concat((null===e.t0||void 0===e.t0||null===(s=e.t0.cause)||void 0===s||null===(u=s.response)||void 0===u?void 0:u.data)||"Something went wrong!")});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(r){return e.apply(this,arguments)}}();return(0,v.jsx)(h,{form:_,onSubmit:j})}},6624:function(e,r){r.Z={user:"UserForm_user__jywr6",userContainer:"UserForm_userContainer__Xl9YM",error:"UserForm_error__PwQ8P",userUpdate:"UserForm_userUpdate__zCF+h",userUpdateTitle:"UserForm_userUpdateTitle__0OFJH",userUpdateForm:"UserForm_userUpdateForm__iNW0-",userUpdateLeft:"UserForm_userUpdateLeft__y6FB7",userUpdateItem:"UserForm_userUpdateItem__VwVJv",userUpdateInput:"UserForm_userUpdateInput__PQ-Cl",userUpdateRight:"UserForm_userUpdateRight__8385q",userUpdateUpload:"UserForm_userUpdateUpload__LHdRu",userUpdateImg:"UserForm_userUpdateImg__OdpFd",userUpdateIcon:"UserForm_userUpdateIcon__lpAa6",userUpdateButton:"UserForm_userUpdateButton__2cBPj",pItemTitle:"UserForm_pItemTitle__m4Kq2",pItem:"UserForm_pItem__CamfI"}}}]);